language: node_js # 设置语言

node_js: stable # 设置相应版本

env:
  - GH_REF: github.com/org-cjl/blogs.git
  - secure: "j/yh1TdtZO43AnnHS7yxpUECyess6qrhe8vvl2JGtt9JciITy1ItIbLXm/gjlZitfJBFOlMX0D/0knddO+zwSrxvGnSulWbAkmnlNVf/vbQRlrBRXlELD4j5a3tDrct5430O5kj/t+y4Wg/WQRT99YH/7I6v+yNCW5I68mMn4FgFgO+EA3AIu5kZOmMKs+1Fsd3lU16/vOd5px0PTgN6K9+Auffr7fFmapVODIT7RCfkiN6vvVLU0LJmqboyks4CjIWNggmDZJLylsy/GR31UabCdH2omjwLcDM/FueT3C//oTIPqTygursXQ+edxtWnqSEDjjv31L/Qg9GcX8fnfNc8YzMbs/oHRDstx4qDC1rWWByewnl103GNK11bOcQvn5oY0mkpo88fpKDwa+cVzFoEcSsy30ZxIss/EnH66tOhcZr7QaCaG/o6QBbkEGEFMEr2mPezIJ83Bso1YOuLv4cPFrPf4qG5bI0MbqzExhFWczZGgpsOwOHVx3OekIb1bvcXXGYRZ+dNjQLWYsY2hbfYRn0PF69NqnA4cjDl5VazDD1tMAAaE8xFlol9AW1X8pUEfnrgMpI6E+6rMYwihEtxuknGpw+c3Fn5JQpvLok/kNMR5gmyUkiFsseCPxN80iYID2D+myLeuX1G4zhsfckF30Gw2mWotWtQLu9nVKU="
  
branches:
  only:
    - blog-source #只监测博客源码分支(md文件)

# S: Build Lifecycle

install:
  - npm install # 安装hexo及插件

script:
  - hexo clean # 清除
  - hexo g # 生成

after_script:
  - cd ./public
  - git init
  - git config user.name "caojialin" # 修改name
  - git config user.email "caojialin2017@gmail.com" # 修改email
  - git add .
  - git commit -m "Travis CI Auto Build"
  - git push --force --quiet "https://${GH_TOKEN}@${GH_REF}" master:gh-pages # GH_TOKEN是在travis加密github中配置token的secure

# E: Build LifeCycle
    
